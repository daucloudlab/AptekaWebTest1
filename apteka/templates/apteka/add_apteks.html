{% load staticfiles %}
<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.4.2.min.js"></script>


    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <link href="{% static 'css/bootstrap.min.css' %}" rel = "stylesheet" />

</head>
<body>
<form id = "apteka_add_form"     method="POST">
    {% csrf_token %}
<div class = "container">

    <div class = "col-md-12">

        <div class = "col-md-10" id = "col1">
            <label for = "name">Название аптеки: </label> <br>
            <input type = "text" id = "name" name = "name" />
            <br>

            <label for = "phone">Номер телефона аптеки(с кодом): </label><br>
            <input type = "text" id = "phone" name="phone" />
            <br>

            <label for = "address">Адрес аптеки: </label><br>
            <input type = "text" id = "address" name = "address" />
            <br>

            <label for = "latitude">Latitude: </label><br>
            <input type = "text" id = "latitude" name = "latitude" />
            <br>

            <label for = "longitude">Longitude: </label><br>
            <input type = "text" id = "longitude" name = "longitude" />
            <br>
            <input type="submit" value = "Сохранить" />
        </div>


    </div>
    </div>
</form>





<script type="text/javascript">
    Parse.initialize("yMnjSWvajnQ10B9oDidOmBA2dH7FrFh4SXeFaXiy",
      "tiGZjISmsliHuQXSxbW4YzWRA9aagyfOKWwTyyYW");


    $("#apteka_add_form").on("submit", function(e){
			e.preventDefault() ;
			var name = $("#name").val() ;
			var phone = $("#phone").val() ;
            var address = $("#address").val() ;
		    var latitude = parseFloat($("#latitude").val()) ;
            var longitude = parseFloat($("#longitude").val()) ;

            var Apteka = Parse.Object.extend("Apteka") ;
            var apteka = new Apteka() ;

			apteka.set("name", name);
			apteka.set("phone", phone);
            apteka.set("address", address) ;
            apteka.set("latitude", latitude) ;
            apteka.set("longitude", longitude) ;
			apteka.save(null, {
  				success: function(apteka) {
    			// Execute any logic that should take place after the object is saved.
    			alert('New object created with objectId: ' + apteka.id);
                    window.location.replace("http://127.0.0.1:8000/apteka/add") ;
  			},
                error: function(apteka, error) {
    				// Execute any logic that should take place if the save fails.
    				// error is a Parse.Error with an error code and description.
    				alert('Failed to create new object, with error code: ' + error.description);
  	}
});

		}) ;


</script>


</body>
</html>